<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/mind-ar/dist/mindar-image-aframe.prod.js"></script>
    <style>
        a-scene {
            height: 100vh; /* Altura del viewport al 100% */
            width: 100vw; /* Ancho del viewport al 100% */
        }
    </style>
    <script>
      // Componente de oclusión para A-Frame
      AFRAME.registerComponent('occlusion-material', {
        init: function () {
          this.el.components.material.material.colorWrite = false;
        }
      });
    </script>
</head>
<body>
    <a-scene embedded antialias="true" shadow="type: pcfsoft" renderer="colorManagement: true">
        <!-- Carga de assets -->
        <a-assets>
            <a-asset-item id="modelo1" src="b829fba1348c_e2e4e2179b2b_large_cactus_in_a_w.glb"></a-asset-item>
            <a-asset-item id="modeloOclusor" src="path_to_your_occluder_model/occluder.glb"></a-asset-item>
            <img id="imageTarget" src="targets.mind">
        </a-assets>

        <!-- Configuración de la realidad aumentada -->
        <a-entity mindar-image="imageTargetSrc: #imageTarget; autoStart: false">
            <!-- Modelo con oclusión -->
            <a-gltf-model src="#modeloOclusor" occlusion-material></a-gltf-model>
            <!-- Modelo que queremos mostrar -->
            <a-gltf-model src="#modelo1" position="0 0 0" scale="0.5 0.5 0.5" shadow="cast: true; receive: true"></a-gltf-model>
        </a-entity>

        <!-- Luces -->
        <a-light type="directional" color="#FFF5F2" intensity="0.6" position="-3 1 -3" target="#imageTarget" castShadow="true"></a-light>
        <a-light type="directional" color="#9BB0FF" intensity="0.2" position="3 1 3" target="#imageTarget" castShadow="true"></a-light>
        <a-light type="ambient" color="#DDD"></a-light>
    </a-scene>

    <script>
      document.querySelector('a-scene').addEventListener('loaded', () => {
        const scene = document.querySelector('a-scene');
        if (scene.hasLoaded) {
          scene.systems['mindar-image-system'].start(); // Inicia el sistema de MindAR cuando A-Frame esté listo
        }
      });
    </script>
</body>
</html>
