<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Realidad Aumentada con WebXR y A-Frame</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script>
    AFRAME.registerComponent('occlusion', {
      init: function () {
        const material = new THREE.MeshStandardMaterial({
          colorWrite: false // El material es invisible pero afecta la profundidad
        });
        this.el.object3D.traverse((obj) => {
          if (obj.isMesh) obj.material = material;
        });
      }
    });
  </script>
</head>
<body>
  <a-scene xrweb="hitTest: true;" renderer="antialias: true; colorManagement: true; shadowMapEnabled: true; shadowMapType: PCFSoftShadowMap;">
    <!-- Configuraci칩n de la c치mara para AR en WebXR -->
    <a-camera look-controls="enabled: false" wasd-controls-enabled="false"></a-camera>

    <!-- Configuraci칩n de luces detallada para emitir sombras realistas -->
    <a-light type="directional" color="#FFFFFF" intensity="1.5" position="2 4 2" target="#scene" cast-shadow="true"
            shadow-camera-near="0.5" shadow-camera-far="50" shadow-camera-left="-5" shadow-camera-right="5" shadow-camera-top="5" shadow-camera-bottom="-5"></a-light>
    <a-light type="ambient" color="#888888" intensity="0.3"></a-light>

    <!-- Entidad que realiza oclusi칩n y muestra modelos con dimensiones y distancias ajustadas -->
    <a-entity xrweb-hit-test="createAnchor: true">
      <a-box position="0 -0.25 0" width="1" height="0.5" depth="1" occlusion shadow="cast: true; receive: true"></a-box>
      <a-gltf-model src="path/to/your/cactus.glb" scale="1 1 1" position="0 -0.25 0" rotation="0 0 0" shadow="cast: true; receive: true"></a-gltf-model>
    </a-entity>

    <!-- Suelo virtual para recibir sombras -->
    <a-plane position="0 -0.5 0" rotation="-90 0 0" width="10" height="10" shadow="receive: true"></a-plane>
  </a-scene>
</body>
</html>
